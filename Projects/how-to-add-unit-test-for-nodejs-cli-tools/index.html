<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="å‰ç«¯ vue åšå®¢">
    <meta name="description" content="Personal blog of WoodenStone">
    <meta name="author" content="WoodenStone">
    
    <title>
        
            å¦‚ä½•ä¸º Node.js å‘½ä»¤è¡Œå·¥å…·æ·»åŠ å•å…ƒæµ‹è¯• |
        
        WoodenStone&#39;s Blog
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/kuma.svg">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"woodenstone.github.io","root":"/","language":"zh-CN","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":false,"init_open":true},"style":{"primary_color":"#FF6623ee","avatar":"/images/kumanon.jpeg","favicon":"/images/kuma.svg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":true,"scale":true},"first_screen":{"enable":true,"background_img":"/images/bg.jpg","description":"The course of true love never did run smooth."},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"enable":true,"preload":false},"code_copy":{"enable":true,"style":"mac"},"pjax":{"enable":true},"lazyload":{"enable":false},"version":"3.4.3"};
    KEEP.language_ago = {"second":"%s ç§’å‰","minute":"%s åˆ†é’Ÿå‰","hour":"%s å°æ—¶å‰","day":"%s å¤©å‰","week":"%s å‘¨å‰","month":"%s æœˆå‰","year":"%s å¹´å‰"};
  </script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                WoodenStone&#39;s Blog
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                é¦–é¡µ
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                å½’æ¡£
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                åˆ†ç±»
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                æ ‡ç­¾
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                å…³äº
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">é¦–é¡µ</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">å½’æ¡£</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">åˆ†ç±»</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">æ ‡ç­¾</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">å…³äº</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">å¦‚ä½•ä¸º Node.js å‘½ä»¤è¡Œå·¥å…·æ·»åŠ å•å…ƒæµ‹è¯•</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/kumanon.jpeg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">WoodenStone</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;2022-06-05 21:00:03
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/Projects/">Projects</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/%E6%8A%80%E6%9C%AF%E9%9A%8F%E7%AC%94/">æŠ€æœ¯éšç¬”</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/CLI/">CLI</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/unit-test/">unit test</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <blockquote>
<p>ä½¿ç”¨ jest å’Œ @oclif/test ä¸ºåŸºäº oclif çš„ CLI å·¥å…·ç¼–å†™å•å…ƒæµ‹è¯•ã€‚</p>
</blockquote>
<span id="more"></span>

<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>å®ä¹ å…¥èŒä»¥æ¥ç¬¬ä¸€ä¸ªé‡åˆ°çš„æ¯”è¾ƒæœ‰æ„æ€çš„é—®é¢˜ï¼šå¦‚ä½•ä¸º CLI æ·»åŠ å•å…ƒæµ‹è¯•ï¼Ÿåœ¨æ­¤ä¹‹å‰ï¼Œä¸ä»…å¯¹äº Node å¦‚ä½•å®ç° CLI ä¸€çªä¸é€šï¼Œå¯¹å•å…ƒæµ‹è¯•ä¹Ÿæ˜¯ä¸€çªä¸é€šğŸ˜¥ã€‚éœ€è¦æ·»åŠ å•æµ‹çš„ CLI å·¥å…·åŸºäº <a class="link"   target="_blank" rel="noopener" href="https://oclif.io/" >oclif<i class="fas fa-external-link-alt"></i></a>ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€ä¾¿å¥½ç”¨ã€èƒ½å¿«é€Ÿä¸Šæ‰‹çš„ CLI å¼€å‘æ¡†æ¶ï¼Œç›¸æ¯”äºå†å²æ‚ ä¹…åº”ç”¨ç”šå¹¿çš„ <a class="link"   target="_blank" rel="noopener" href="https://github.com/tj/commander.js/" >commander.js<i class="fas fa-external-link-alt"></i></a> ï¼Œå®ƒæä¾›äº†æ›´å¥½çš„ multi command æ”¯æŒï¼Œä¾¿äºæ‰©å±•çš„ <code>Commander</code> ç±»ï¼Œå†…ç½®çš„å‰å¤„ç†åå¤„ç† hookï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿä¸“æ³¨äºåŠŸèƒ½å‘½ä»¤çš„å¼€å‘ã€‚ï¼ˆå½“ç„¶ï¼Œè¿™å¹¶ä¸ä»£è¡¨ commander.js å°±ä¸èƒ½å®ç°ä¸€æ ·çš„ä¼˜é›…å¼€å‘ï¼Œäº‹å®ä¸Šå›¢é˜Ÿå†…éƒ¨ä¸€ä¸ªåŸºäº commander.js çš„ CLI çš„æ¶æ„å°è£…çš„éå¸¸å·§å¦™ç²¾è‡´ï¼Œå„ç§ IoC æ‰‹åˆ°æ“’æ¥ï¼Œå¹¶å®ç°äº†å‰å¤„ç†åå¤„ç†å’Œå‘½ä»¤åŸºç±»ï¼Œè®©äººå—ç›ŠåŒªæµ…ã€‚ä¸è¿‡æœ¬æ–‡çš„æ¢ç´¢è¿‡ç¨‹ä¸ oclif æ¡†æ¶æœ‰ä¸€å®šå…³ç³»ï¼Œå› æ­¤å…ˆåœ¨æ­¤å¤„è¯´æ˜ã€‚ï¼‰åœ¨å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œå®ƒæ¨èä½¿ç”¨ <a class="link"   target="_blank" rel="noopener" href="https://github.com/oclif/test" >@oclif/test<i class="fas fa-external-link-alt"></i></a> è¿›è¡Œå•æµ‹ï¼Œä½†åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¾ç„¶é‡åˆ°äº†ä¸€äº›é—®é¢˜ã€‚æœ¬æ–‡å°†è®°å½•ä»é›¶æ¢ç´¢çš„è¿‡ç¨‹ï¼Œå¹¶ä¸”ç»™å‡ºæˆ‘çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 id="å°è¯•"><a href="#å°è¯•" class="headerlink" title="å°è¯•"></a>å°è¯•</h2><h3 id="oclif-test"><a href="#oclif-test" class="headerlink" title="@oclif/test"></a><code>@oclif/test</code></h3><p>æ—¢ç„¶æ˜¯å®˜æ–¹æ–‡æ¡£æ¨èï¼Œå°±ä¸èƒ½ä¸ä½“éªŒä¸€ä¸‹ã€‚æ–‡æ¡£ä¸­ç»™å‡ºçš„ä¾‹å­éå¸¸ç®€å•ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¥æºäºæ–‡æ¡£</span></span><br><span class="line"><span class="keyword">import</span> &#123;expect, test&#125; <span class="keyword">from</span> <span class="string">&#x27;@oclif/test&#x27;</span></span><br><span class="line"></span><br><span class="line">describe(<span class="string">&#x27;auth:whoami&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  test</span><br><span class="line">  .nock(<span class="string">&#x27;https://api.heroku.com&#x27;</span>, <span class="function"><span class="params">api</span> =&gt;</span> api</span><br><span class="line">    .get(<span class="string">&#x27;/account&#x27;</span>)</span><br><span class="line">    <span class="comment">// user is logged in, return their name</span></span><br><span class="line">    .reply(<span class="number">200</span>, &#123;<span class="attr">email</span>: <span class="string">&#x27;jeff@example.com&#x27;</span>&#125;)</span><br><span class="line">  )</span><br><span class="line">  .stdout()</span><br><span class="line">  .command([<span class="string">&#x27;auth:whoami&#x27;</span>])</span><br><span class="line">  .it(<span class="string">&#x27;shows user email when logged in&#x27;</span>, <span class="function"><span class="params">ctx</span> =&gt;</span> &#123;</span><br><span class="line">    expect(ctx.stdout).to.equal(<span class="string">&#x27;jeff@example.com\n&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¾‹å­ä½¿ç”¨ <code>nock</code>(<a class="link"   target="_blank" rel="noopener" href="https://github.com/nock/nock" >nock<i class="fas fa-external-link-alt"></i></a>ï¼Œä¸€ä¸ªç”¨æ¥æ¨¡æ‹Ÿ http è¯·æ±‚çš„åŒ…)æ¨¡æ‹Ÿå‘é€ä¸€ä¸ª http è¯·æ±‚ï¼Œç„¶å mock æ ‡å‡†è¾“å‡º<code>stdout</code>ï¼Œå†æ‰§è¡ŒçœŸæ­£çš„å‘½ä»¤ <code>auth:whoami</code>ï¼Œæœ€åä»<code>ctx</code>ä¸­è·å–<code>stdout</code>è¿›è¡Œæ–­è¨€ã€‚è¿™é‡Œå¼•å…¥çš„<code>test</code> å’Œ <code>expect</code>æ˜¯å°è£…çš„ <a class="link"   target="_blank" rel="noopener" href="https://github.com/oclif/fancy-test" >oclif/fancy-test<i class="fas fa-external-link-alt"></i></a>ï¼Œè€Œå®ƒåˆæ˜¯åŸºäº <a class="link"   target="_blank" rel="noopener" href="https://mochajs.org/" >Mocha<i class="fas fa-external-link-alt"></i></a>ï¼Œç®€è¨€ä¹‹å°±æ˜¯ä¸€ä¸ªèƒ½æ›´å°‘å†™ setup/teardown çš„é“¾å¼è°ƒç”¨å•æµ‹åº“ï¼Œ<code>expect</code> ä½¿ç”¨çš„æ˜¯ <a class="link"   target="_blank" rel="noopener" href="https://www.chaijs.com/" >Chai<i class="fas fa-external-link-alt"></i></a> è¯­æ³•ã€‚</p>
<p>çœ‹åˆ°å¦‚æ­¤ç®€å•çš„ç¤ºä¾‹ï¼Œæˆ‘ä¸ç¦æ»¡å¤´é—®å·ï¼Œå…¶ä¸»è¦ä¾èµ–çš„ mock æ–¹å¼æ˜¯ç›´æ¥ä»£ç† http è¯·æ±‚ï¼Œè¿™å›ºç„¶æ˜¯éå¸¸ç¬¦åˆç›´è§‰çš„ï¼Œå› ä¸ºæ¯ä¸€ä¸ªå‘½ä»¤ä¸­ç¡®å®éƒ½éœ€è¦å‘é€ http è¯·æ±‚ï¼Œç„¶è€Œå‘é€ http è¯·æ±‚æœ‰æ—¶å¯èƒ½ä¹Ÿæ˜¯ä¸€ä»¶å±±è·¯åå…«å¼¯çš„äº‹ï¼Œç®€è¦åˆ—ä¸¾ä¸€äº›é—®é¢˜ï¼š</p>
<ul>
<li><p>ç›´æ¥ mock http è¯·æ±‚è¦æ±‚ç»™å‡ºè¯¦ç»†çš„è·¯å¾„ï¼Œæ¯”å¦‚<code>https://exmaple.com/api/User</code>å’Œgetã€postç­‰æ–¹æ³•ï¼Œç„¶åæ¨¡æ‹Ÿè¿”å›å€¼ï¼Œéå¸¸æ­»æ¿</p>
</li>
<li><p>å¯¹äºå°è£…äº†å¤šå±‚çš„ api è°ƒç”¨ï¼ˆä¾‹å¦‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæˆ‘ä»¬çš„ api è°ƒç”¨éœ€è¦ç»è¿‡å„ç§ç­¾åï¼Œè¿˜å¯èƒ½æ˜¯é€šè¿‡ sdk è°ƒç”¨ï¼Œæœ€ç»ˆæš´éœ²å‡ºæ¥çš„å·²ç»æ˜¯ä¸çŸ¥é“ä¾èµ–äº†å¤šå°‘å±‚çš„å°å°çš„æ¥å£ï¼‰ï¼Œå¦‚æœç›´æ¥è¿™æ ·å†™å•æµ‹çš„è¯ï¼Œä¼šå¾ˆéš¾æ‰¾åˆ°å…·ä½“éœ€è¦è°ƒç”¨å“ªä¸ªæ¥å£ã€‚ä¸”å„ä¸ªè¯·æ±‚çš„è·¯å¾„å¯èƒ½å®Œå…¨ä¸€æ ·ï¼Œæ“ä½œé€šè¿‡ Body / Header ä¸­çš„æŸäº›å­—æ®µåŒºåˆ†ï¼Œè¿™å°±å¯¼è‡´å¾ˆéš¾ç²¾å‡† mock</p>
</li>
<li><p>æ— æ³•åšåˆ°è¿ç»­ mock å¤šä¸ª http è°ƒç”¨ï¼Œè¿™æ„å‘³ç€ä¸‹é¢çš„æƒ…å†µğŸ˜¢ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">test</span><br><span class="line">    .nock(<span class="string">&quot;https://example.com&quot;</span>, <span class="function"><span class="params">api</span> =&gt;</span> api</span><br><span class="line">    .post(<span class="string">&#x27;/api/User&#x27;</span>)</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    )</span><br><span class="line"><span class="comment">// è¿™é‡Œä¸èƒ½å†æ¥`.nock`äº†</span></span><br></pre></td></tr></table></figure></li>
<li><p>æµ‹è¯•å¿…é¡»å†™å¾—éå¸¸æ­»æ¿ï¼Œç”šè‡³è¿å¤šä¸€ä¸ªå°‘ä¸€ä¸ªç©ºæ ¼éƒ½ä¸è¡Œ</p>
</li>
</ul>
<p>å½“ç„¶ï¼Œå®ƒä¹Ÿå¹¶éä¸€æ— æ˜¯å¤„ã€‚ä½¿ç”¨<code>.stdout()</code>æ¥ mock è¾“å‡ºè¿˜æ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚å¦å¤–ä»”ç»†åœ°ç¿»çœ‹å„ä¸ªä»“åº“æ–‡æ¡£ï¼Œå¯ä»¥å‘ç°å®ƒå¯ä»¥é€šè¿‡æ’æ¡©ä»£ç†æ”¯æŒ mock ç”¨æˆ·è¾“å…¥ï¼ˆstdinï¼‰çš„ï¼Œä¾‹å¦‚ä½¿ç”¨ <code>cli-ux</code>è·å–è¾“å…¥æ—¶ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> test</span><br><span class="line">   .stub(cli, <span class="string">&quot;prompt&quot;</span>, <span class="function">() =&gt;</span> <span class="keyword">async</span> () =&gt; mockUserName)</span><br><span class="line">.stub(cli, <span class="string">&quot;prompt&quot;</span>, <span class="function">() =&gt;</span> <span class="keyword">async</span> () =&gt; mockPassword)</span><br><span class="line">   .stdout()</span><br><span class="line">   .command([<span class="string">&quot;auth:login&quot;</span>])</span><br><span class="line">   .it(<span class="string">&quot;should login successfully&quot;</span>, <span class="function">(<span class="params">ctx</span>) =&gt;</span> &#123;</span><br><span class="line">     expect(ctx.stdout).toContain(<span class="string">`login successfully`</span>);</span><br><span class="line">   &#125;);</span><br></pre></td></tr></table></figure>

<p>ç®€å•æ¥è¯´ï¼Œå®ƒç¼ºå¤±äº†æœ€é‡è¦çš„èƒ½åŠ›ï¼šå‡½æ•°æˆ–æ¨¡å—çº§åˆ«çš„ mock ï¼Œè€Œéå•çº¯ä»£ç† http è¯·æ±‚ã€‚</p>
<h3 id="jest"><a href="#jest" class="headerlink" title="jest"></a><code>jest</code></h3><p><a class="link"   target="_blank" rel="noopener" href="https://jestjs.io/" >Jest<i class="fas fa-external-link-alt"></i></a> æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„æµ‹è¯•æ¡†æ¶ï¼Œå¹¶ä¸”å®ƒæä¾›äº†ä¼˜ç§€çš„å‡½æ•°&amp;æ¨¡å—çº§åˆ«çš„ mock èƒ½åŠ›ï¼Œè¿™æ°å¥½å°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚åˆ©ç”¨å®ƒçš„ä»£ç†å‡½æ•°å’Œæ¨¡å—èƒ½åŠ›ï¼Œå¯ä»¥åƒè¿™æ ·æ¥æ¨¡æ‹Ÿ api çš„è°ƒç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™ä¹Ÿæ˜¯é‚£å¸¸è§çš„ä¸€é•¿ä¸² &#123;__esModule: true, ...originalModule, ...&#125; çš„ç®€æ´å†™æ³•</span></span><br><span class="line">jest.mock(<span class="string">&quot;../path/to/api&quot;</span>, <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">  ...jest.requireActual(<span class="string">&quot;../path/to/api&quot;</span>),</span><br><span class="line">  <span class="attr">functionNeedToMock</span>: jest.fn().mockResolvedValue(&#123;</span><br><span class="line">    <span class="attr">MockKey</span>: <span class="string">&#x27;mockValue&#x27;</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">anotherFunctionNeedToMock</span>: jest.fn().mockResolvedValue(<span class="literal">true</span>),</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„è¿™æ®µä»£ç å°±å¯ä»¥ä»£ç†<code>../path/tp/api</code>è¿™ä¸ªæ¨¡å—ä¸­çš„<code>functionNeedToMock</code>å’Œ<code>anotherFunctionNeedToMock</code>ä¸¤ä¸ªå‡½æ•°ï¼Œè€Œä¸ä¿®æ”¹å…¶å®ƒçš„å‡½æ•°ã€‚</p>
<p>å¦å¤–ä¸€ä¸ªé—®é¢˜æ˜¯å¦‚æœéœ€è¦ä»£ç†çš„æ˜¯ä½äº<code>Command</code> ç±»ä¹‹å†…çš„å‡½æ•°ï¼Œä¾‹å¦‚åœ¨ä¸‹é¢è¿™ä¸ª<code>GetShoppingCartStatus</code>ç±»ä¸­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹è‡ªæ–‡æ¡£</span></span><br><span class="line"><span class="keyword">import</span> Command <span class="keyword">from</span> <span class="string">&#x27;@oclif/command&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">GetShoppingCartStatus</span> <span class="keyword">extends</span> <span class="title">Command</span> </span>&#123;</span><br><span class="line">  <span class="comment">// éœ€è¦ä»£ç†çš„å‡½æ•°</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">checkLoginStatus</span>(<span class="params"></span>) </span>&#123;<span class="comment">/* ... */</span>&#125;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">run</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> checkLoginStatus()</span><br><span class="line">      <span class="comment">/* some other code */</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">      <span class="keyword">if</span> (err.statusCode === <span class="number">401</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.error(<span class="string">&#x27;not logged in&#x27;</span>, &#123;<span class="attr">exit</span>: <span class="number">100</span>&#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">throw</span> err</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬éœ€è¦ä»£ç†çš„æ˜¯<code>checkLoginStatus</code>è¿™ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨<code>spyOn</code>æ¥â€œç›‘å¬â€<code>GetShoppingCartStatus</code>è¿™ä¸ªç±»çš„åŸå‹ï¼Œç¤ºä¾‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> checkLoginStatus = jest</span><br><span class="line">  .spyOn(GetShoppingCartStatus.prototype, <span class="string">&quot;checkLoginStatus&quot;</span>)</span><br><span class="line">  .mockImplementation(<span class="function">() =&gt;</span></span><br><span class="line">    &#123;<span class="comment">/* ... */</span>&#125;</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>

<p><code>spyOn</code>æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œå®ƒåœ¨ CLI å·¥å…·çš„å•æµ‹ä¸­æœ‰ä¸€ä¸ªæ›´ä¸ºé‡è¦çš„ä½œç”¨ï¼Œé‚£å°±æ˜¯â€œç›‘å¬â€<code>stdout</code>ã€‚å¯ä»¥åƒè¿™æ ·æ¥è·å–<code>stdout</code>çš„è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stdout;</span><br><span class="line"></span><br><span class="line">beforeEach(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  stdout = [];</span><br><span class="line">  jest</span><br><span class="line">    .spyOn(process.stdout, <span class="string">&quot;write&quot;</span>)</span><br><span class="line">    .mockImplementation(<span class="function">(<span class="params">val</span>) =&gt;</span> stdout.push(val));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">afterEach(<span class="function">() =&gt;</span> jest.restoreAllMocks());</span><br></pre></td></tr></table></figure>

<p>å½“éœ€è¦æ–­è¨€çš„æ—¶å€™ï¼Œå°±ä½¿ç”¨<code>stdout</code>å°±å¯ä»¥äº†ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»æ˜ç™½äº†ä¸¤ç§æ¡†æ¶çš„ä¼˜åŠ£ï¼š</p>
<ul>
<li><code>@oclif/test</code>ç›´æ¥ä»£ç† http è¯·æ±‚çš„æ–¹å¼æœ‰å¾ˆå¤§çš„å±€é™æ€§ï¼Œä½†å®ƒé“¾å¼çš„è°ƒç”¨æ–¹å¼ä½¿å¾—æ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥å’Œç›‘å¬è¾“å‡ºå¾ˆæ–¹ä¾¿ï¼›</li>
<li><code>jest</code>èƒ½å¤Ÿè¿›è¡Œå‡½æ•°&amp;æ¨¡å—çº§åˆ«çš„ mockï¼Œä½†ç”¨å®ƒæ•è· <code>stdout</code>ã€æ¨¡æ‹Ÿå¤„ç†ç”¨æˆ·è¾“å…¥å´æ˜¾å¾—ç¹çã€‚</li>
</ul>
<p>å„å–é•¿å¤„ï¼Œå¯¹äºè¿™æ ·ä¸€ä¸ªå‘½ä»¤ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾å…¶å‘½ä»¤ä¸º run:upload</span></span><br><span class="line"><span class="keyword">import</span> Command <span class="keyword">from</span> <span class="string">&#x27;@oclif/command&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; cli &#125; <span class="keyword">from</span> <span class="string">&#x27;cli-ux&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; zipDir &#125; <span class="keyword">from</span> <span class="string">&#x27;../utils&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">UploadFilesCommand</span> <span class="keyword">extends</span> <span class="title">Command</span> </span>&#123;</span><br><span class="line">  <span class="comment">// éœ€è¦ä»£ç†çš„å‡½æ•°</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">checkLoginStatus</span>(<span class="params"></span>) </span>&#123;<span class="comment">/* ... */</span>&#125;</span><br><span class="line">  <span class="comment">// ç”¨æˆ·è¾“å…¥</span></span><br><span class="line">  <span class="keyword">static</span> flags = &#123;</span><br><span class="line">      <span class="attr">path</span>: flags.string(&#123; <span class="attr">char</span>: <span class="string">&#x27;p&#x27;</span>, <span class="attr">description</span>: <span class="string">&#x27;æ–‡ä»¶è·¯å¾„&#x27;</span>&#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">run</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> checkLoginStatus()</span><br><span class="line">      <span class="keyword">await</span> cli.prompt(<span class="string">&#x27;è¯·è¾“å…¥æ–‡ä»¶è·¯å¾„&#x27;</span>, &#123; <span class="attr">required</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">      <span class="keyword">await</span> zipDir(<span class="comment">/* ... */</span>)</span><br><span class="line">      <span class="comment">/* some other code */</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">      <span class="keyword">if</span> (err.statusCode === <span class="number">401</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.error(<span class="string">&#x27;not logged in&#x27;</span>, &#123;<span class="attr">exit</span>: <span class="number">100</span>&#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">throw</span> err</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥è¿™æ ·åˆ©ç”¨è¿™ä¸¤ä¸ªæ¡†æ¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// uploadFiles.test.js</span></span><br><span class="line"><span class="keyword">import</span> cli <span class="keyword">from</span> <span class="string">&quot;cli-ux&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; test &#125; <span class="keyword">from</span> <span class="string">&quot;@oclif/test&quot;</span>;</span><br><span class="line"><span class="comment">// ä»£ç† zipDir å‡½æ•°</span></span><br><span class="line">jest.mock(<span class="string">&quot;../path/to/utils&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">zipDir</span>: jest.fn().mockResolvedValue(<span class="literal">true</span>),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// ä»£ç† checkLoginStatus å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> checkLoginStatus = jest</span><br><span class="line">  .spyOn(UploadFilesCommand.prototype, <span class="string">&quot;checkLoginStatus&quot;</span>)</span><br><span class="line">  .mockImplementation(<span class="function">() =&gt;</span> &#123;<span class="comment">/* ... */</span>&#125;);</span><br><span class="line"><span class="comment">// æµ‹è¯•</span></span><br><span class="line">describe(<span class="string">&#x27;run:upload&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  test</span><br><span class="line">    .stub(cli,<span class="string">&#x27;prompt&#x27;</span>, <span class="function">() =&gt;</span> <span class="keyword">async</span> () =&gt; <span class="string">&#x27;a/b/c&#x27;</span>) <span class="comment">// å¯¹ cli æ’æ¡©ï¼Œç”±äºæ˜¯é“¾å¼è°ƒç”¨ï¼Œå¦‚æœæœ‰å¤šä¸ªç”¨æˆ·è¾“å…¥ï¼Œå¯ä»¥æ’æ¡©å¤šæ¬¡</span></span><br><span class="line">    .stdout()</span><br><span class="line">    .command([<span class="string">&#x27;run:upload&#x27;</span>])</span><br><span class="line">    .it(<span class="string">&#x27;should upload files successfully&#x27;</span>, <span class="function">(<span class="params">ctx</span>) =&gt;</span> &#123;</span><br><span class="line">      expect(ctx.stdout).toEqual(<span class="comment">/* or other assets */</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬æ—¢åˆ©ç”¨äº† jest æ¨¡æ‹Ÿå‡½æ•°å’Œæ¨¡å—çš„åŠŸèƒ½ï¼Œä¹Ÿä½¿ç”¨äº† @oclif/test ç®€æ´åœ°å¤„ç†è¾“å…¥è¾“å‡ºï¼Œèåˆäº†ä¸¤ç§æ¡†æ¶çš„ä¼˜ç‚¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥é¡ºç•…åœ°è¿›è¡Œå•æµ‹ç¼–å†™äº†ã€‚</p>
<h2 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h2><p>åœ¨æ¢ç´¢çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°å…³äºç»™ Node å¼€å‘çš„ CLI æ·»åŠ å•æµ‹çš„èµ„æ–™å°‘å¾—å¯æ€œï¼Œè¿™ä¸èƒ½ä¸è¯´æ˜¯ä¸€ç§é—æ†¾ã€‚æ­¤å¤–ï¼Œæˆ‘è¿˜èµ°äº†å¾ˆå¤§ä¸€åœˆå¼¯è·¯ï¼ŒåŒ…æ‹¬å› ä¸ºé¡¹ç›®æœ¬èº« ts ç‰ˆæœ¬å¯¼è‡´çš„ ts-jest æ— æ³•ä½¿ç”¨ï¼Œä½¿ç”¨å„ç§å¥‡æ€ªçš„ <code>stdin</code>æ–¹æ³•ï¼Œç”¨å¥‡æ€ªçš„æ–¹å¼è¯•å›¾ç›´æ¥è°ƒç”¨ API çš„æ–¹æ³•ï¼Œä½†æœ€ç»ˆéƒ½å¤±è´¥äº†ã€‚å¯èƒ½æ˜¯ç¼ºä¹ç»éªŒçš„ç¼˜æ•…ï¼Œåœ¨ç¼–å†™å•æµ‹çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°å¾ˆéš¾æŠŠæ¡ mock çš„ç²’åº¦ï¼Œä¾‹å¦‚ä¸€ä¸ªå†…éƒ¨ç”¨åˆ°5ä¸ªå‡½æ•°çš„å‘½ä»¤ï¼Œæˆ‘ç”šè‡³éœ€è¦ mock æ‰4ä¸ªï¼Œå¯¼è‡´å¤§éƒ¨åˆ†ä»£ç éƒ½æ²¡æœ‰è¢«æ‰§è¡Œåˆ°ï¼Œè¿™æˆ–è®¸æ„å‘³ç€å‘½ä»¤çº§åˆ«çš„å•æµ‹è¦å»ºç«‹åœ¨ api æ­£ç¡®çš„åŸºç¡€ä¹‹ä¸Šã€‚å½“ç„¶å®ƒåæ˜ çš„é—®é¢˜æ›´åœ¨äºï¼Œæˆ‘ä¸çŸ¥é“å•æµ‹åº”è¯¥æµ‹ä»€ä¹ˆï¼Œæˆ–è®¸åœ¨ä¸çŸ¥ä¸è§‰é—´ï¼Œæˆ‘å·²ç»åœ¨æµ‹è¯•å®ç°ç»†èŠ‚äº†ã€‚æ­¤å¤–ï¼ŒCLI å‡ ä¹æ˜¯ä¸å¯é¿å…åœ°ä¼šç”¨åˆ°ä¸€äº› fs æ–¹æ³•ï¼Œåœ¨ mock æŸäº›æ–¹æ³•çš„æ—¶å€™ï¼Œæˆ‘å‘ç°æ•´ä¸ªå·¥å…·ç›´æ¥ crash äº†ï¼Œå¯¼è‡´åªèƒ½ mock ä¸€ä¸ªå¾ˆå¤§ç²’åº¦çš„å‡½æ•°ã€‚è¿™å¯èƒ½æ˜¯åœ¨ç¼–ç çš„æ—¶å€™å°±éœ€è¦æ³¨æ„çš„é—®é¢˜ã€‚æœ€åï¼Œæ–­è¨€CLI<code>stdout</code>å¯èƒ½æ ¹æœ¬å°±ä¸æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ï¼Œå› ä¸ºå„ç§<code>æˆåŠŸ/å¤±è´¥/å‡ºé”™</code>æ ¹æœ¬å°±ä¸æ˜¯æœ‰è§„åˆ™çš„ã€ä¸èƒ½å˜åŠ¨çš„è¾“å‡ºå‘€ï¼</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a class="link"   target="_blank" rel="noopener" href="https://martianwabbit.com/2018/05/25/testing-oclif-with-jest.html" >David DÃ­az | Testing OCLIF apps with Jest (martianwabbit.com)<i class="fas fa-external-link-alt"></i></a></p>
<p><a class="link"   target="_blank" rel="noopener" href="https://medium.com/@altshort/unit-testing-node-cli-apps-with-jest-2cd4adc599fb" >Unit testing node CLI apps with Jest | by Jon Short | Medium<i class="fas fa-external-link-alt"></i></a></p>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>æœ¬æ–‡æ ‡é¢˜ï¼šå¦‚ä½•ä¸º Node.js å‘½ä»¤è¡Œå·¥å…·æ·»åŠ å•å…ƒæµ‹è¯•</li>
        <li>æœ¬æ–‡ä½œè€…ï¼šWoodenStone</li>
        <li>åˆ›å»ºæ—¶é—´ï¼š2022-06-05 21:00:03</li>
        <li>
            æœ¬æ–‡é“¾æ¥ï¼šhttps://woodenstone.github.io/Projects/how-to-add-unit-test-for-nodejs-cli-tools/
        </li>
        <li>
            ç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
        </li>
    </ul>
</div>

            </div>
        

        
            <div class="article-nav">
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/Prose/my2021/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">2021 å›é¡¾å±•æœ›</span>
                                <span class="post-nav-item">ä¸‹ä¸€ç¯‡</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2021</span>
              -
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">WoodenStone</a>
        </div>
        
        <div class="theme-info info-item">
            ç”± <a target="_blank" href="https://hexo.io">Hexo</a> é©±åŠ¨&nbsp;|&nbsp;ä¸»é¢˜&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.3</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%83%8C%E6%99%AF"><span class="nav-number">1.</span> <span class="nav-text">èƒŒæ™¯</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%9D%E8%AF%95"><span class="nav-number">2.</span> <span class="nav-text">å°è¯•</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#oclif-test"><span class="nav-number">2.1.</span> <span class="nav-text">@oclif&#x2F;test</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jest"><span class="nav-number">2.2.</span> <span class="nav-text">jest</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">3.</span> <span class="nav-text">æ€»ç»“</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A1%A5%E5%85%85"><span class="nav-number">4.</span> <span class="nav-text">è¡¥å……</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reference"><span class="nav-number">5.</span> <span class="nav-text">Reference</span></a></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="æœç´¢..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/code-copy.js"></script>




<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/toc.js"></script>
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.3/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
